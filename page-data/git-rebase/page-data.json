{"componentChunkName":"component---src-templates-blog-post-js","path":"/git-rebase/","result":{"data":{"site":{"siteMetadata":{"title":"JoDMsoluth Blog"}},"markdownRemark":{"id":"91581f11-91a7-5958-86a2-30ac0052ff78","excerpt":"서론 아마 Git Merge방식은 Git을 좀 써본 사람이라면 누구나 사용해 본 방식일 거라고 생각합니다. 저는 rebase의 용도를 처음 들었을 때 굉장히 어렵고 고급진 방법이라고 생각을 했는데요. 공부를 시작하고 나서는 익숙해지면 정말 쉽겠다는 생각이 들었습니다. Git Rebase…","html":"<h1>서론</h1>\n<p>아마 Git Merge방식은 Git을 좀 써본 사람이라면 누구나 사용해 본 방식일 거라고 생각합니다.</p>\n<p>저는 rebase의 용도를 처음 들었을 때 굉장히 어렵고 고급진 방법이라고 생각을 했는데요. 공부를 시작하고 나서는 익숙해지면 정말 쉽겠다는 생각이 들었습니다.</p>\n<h1>Git Rebase</h1>\n<p><code class=\"language-text\">re + base</code>는 말 그대로 <strong>base를 재설정한다</strong>는 의미입니다. 여기서 말하는 base는 ‘branch’에 대한 base입니다.</p>\n<p>아래 사진에 다음과 같은 branch의 commit 구조가 있다고 생각해 봅시다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1fd3ca0ad90411531db926f20618e5d9/f1d1f/image1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.79746835443038%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAAB3klEQVQoz21STU8TURSdH4ZEVwrBBcSNC1cSE6MxUhtIRF0Y4h9gAW78Fa5ETTEkEoU2UMROO9CZMq1MS6ftdL4/3vHOozNOzZzkZs597855993zBBAYYzwSHsP1PNiOC8/3OXddD0EYIq8+4TGEbBLzMIo4FyUFu/sVnNabqP6WsPfjCBcdbepQLpYRjUNINqKJUIyIRdM5cT8IkEXSLcCm1gVjbOHFq22svNyCPjIxNCwUX7/na3E+GtsorG/zvD8cw3Z9rG98wNPVTWg9HfGx2sDEhaajO7AgSM02ZucKmLmzgqOagmpDxex8ATcXiigdNnBcVzFz+zluUE35VIb8R8etu0Vef1CpwSXFmtLFz6oISe1dX/nLtzJ2Sodp2593y/hKa2M3oKsxzndKB+n+3n4VHz99T/MwYpNR5ZiSzS0S7BvO1Cyzs82awWjuqSlhGPFgkwGHNHBGP9okOHIC+IYBazBMhTzThNkf5JuS1xnnFAF95PM2nj3awJOHb6Ff9mBbDoqP32H5wRv0FBU+1avdEVqXV9B081rwf2SfUeeshcXFVSwtreG8JkMjN+/fW8P8QgHKiQiHDhVbZMqxiLP2Vb7gRDXtWjmpQyYXE3QaTUiVX/9K0/cL/AXmfisxRwDUYQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image1\"\n        title=\"image1\"\n        src=\"/static/1fd3ca0ad90411531db926f20618e5d9/f058b/image1.png\"\n        srcset=\"/static/1fd3ca0ad90411531db926f20618e5d9/c26ae/image1.png 158w,\n/static/1fd3ca0ad90411531db926f20618e5d9/6bdcf/image1.png 315w,\n/static/1fd3ca0ad90411531db926f20618e5d9/f058b/image1.png 630w,\n/static/1fd3ca0ad90411531db926f20618e5d9/f1d1f/image1.png 739w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>feture라는 브랜치는 master 브랜치에서 파생된 브랜치입니다. feature를 작업하는 도중에 누군가 C-D 커밋을 master 브랜치에 푸시했습니다.</p>\n<p>Merge 방식을 사용했던 사람은 아마 master 브랜치를 pull 해서 merge하는 방식을 사용할 것입니다. 하지만, 우리는 발상을 달리해서 E-F 커밋의 현재 base인 B를 D로 바꾸는 것으로 코드를 합치겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># 현재 feature 브랜치에 있다</span>\n<span class=\"token comment\"># 사용법은 간단하다 --rebase만 붙이면 된다.</span>\n<span class=\"token function\">git</span> pull --rebase origin master</code></pre></div>\n<p>결과적으로 아래와 같은 모양이 나옵니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7dfe4726b14c2aa6b8996a24b309d773/5a190/image2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 36.075949367088604%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAABSUlEQVQoz21Qv0/CQBjt/+XkZBzcjHExDu64OBB242IMk8ZBBzcXV3dDSMREqxQJpLQ0UKi0tJIrxXJ3fV4P+e1LLnn3fcn78SnNloPCs4YU5U8TalmXvFiqoN5oIxH8qfiBjtOX83hMQRlDki7ENpmQGZT81QM2d07gDYbIZC9xlLmAT0bY3s3hLH8Ppz/AxtYxru8eETFArVnQ2x640EnFVp/i9Hy8aw2pbjQ7qOktybWqCbvrSa5qOrq9AOEPlX/G+SzZVGiSViScRl2MTtlyjUk5gIyEIGfzIaVLe1k5FeLCMQX/c45FkrdqAKcXgYmbvVZ8eEGMetXA4X4OJXFTy7BxsJfFS0GFSyLUTBskGs8TLqbklMFohfgexEiEScMiCIcM/peH89NbmHULgRsIfgNdmIQxgxsQRDFdrzyvnqwUXj/Df/gF8DUMK4J6WNoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image2\"\n        title=\"image2\"\n        src=\"/static/7dfe4726b14c2aa6b8996a24b309d773/f058b/image2.png\"\n        srcset=\"/static/7dfe4726b14c2aa6b8996a24b309d773/c26ae/image2.png 158w,\n/static/7dfe4726b14c2aa6b8996a24b309d773/6bdcf/image2.png 315w,\n/static/7dfe4726b14c2aa6b8996a24b309d773/f058b/image2.png 630w,\n/static/7dfe4726b14c2aa6b8996a24b309d773/5a190/image2.png 800w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h1>Git Rebase 심화</h1>\n<h2>1. Interactive Rebasing</h2>\n<p><code class=\"language-text\">Interactive Rebasing</code> 은 Rebase 를 실행하기 전, 내가 <strong>작업 중인 feature 브랜치의 commit history 를 조작</strong>할 수 있게 해줍니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> rebase -i master</code></pre></div>\n<p>각각의 commit 들의 앞에 붙은 command 에 따라 조작이 이루어지며 각 command 는 설명 부분에 나열해보겠습니다..</p>\n<ul>\n<li>pick : 해당 commit 그대로 유지</li>\n<li>reword : 해당 commit 의 message 변경</li>\n<li>fixup : 해당 commit 을 없애고 코드 변경 사항은 바로 윗 commit 에 포함 시킴</li>\n</ul>\n<p>Interative Rebasing 은 보통 불필요한 commit history 를 정리하기 위해 사용됩니다.</p>\n<h2>2. Local Cleanup</h2>\n<p>작업 중인 feature 브랜치의 commit 몇 개만의 history 를 수정하려면, git rebase 의 base 를 master 브랜치의 끝이 아니라 feature 브랜치의 이전 commit 중 하나로 정해주면 됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> rebase -i HEAD~3</code></pre></div>\n<p>위의 명령어로 HEAD 에서 3 단계 전의 commit 을 base 로 잡고 그 위의 commit 부터 history 를 re-write 할 수 있습니다.\n<strong>Rebase하기전이 아니라 단지, Local상에서 commit을 수정하는 장점이 있습니다.</strong></p>\n<p>커밋 수정을 완료했으면 다음과 같은 방법으로 Rebase할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> merge-base feature master\n<span class=\"token function\">git</span> rebase -i origin-base</code></pre></div>\n<h1>Rebase를 사용하는 이유?</h1>\n<p>근데, 우리는 왜 쓰기 쉬운 Merge 방식을 냅두고 Rebase 방식을 사용하는 것일까요??</p>\n<p>결론부터 말하면 브랜치의 히스토리가 깔끔해지기 때문입니다.</p>\n<p>아래 사진은 극단적인 예시이기는 하지만, 비교하기에 적합한 사진이라 넣었습니다. 커밋 히스토리가 정말 깔끔해지지 않았나요??</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/404ec8bf0e538a2033a5e1ac11deb292/2dc7d/image3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 73.41772151898735%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAARlAAAEZQAGA43XUAAACFklEQVQoz4VTbY/SQBDu//e7HzRRTy8mGjESNWeiuYNWgoDyEigH5R0K5aXHttttu93utk5bQM54cdJsnt3ZmZ2Z56kUBAEhxPd9LkScmoiiDETHkwSndgJhGAKWdhujXFJkWY6OMf81IYTjOHBfyten1+0pIe6TYs91vc0ePy32MPF8B6svHhO0J67L43jyKbeqVwGMrz4sS4WsLmlgoIVpw+amOXSIiwj90dehBt8l6+ZPzlhW0VptOZsVgM1tB+vzrBPprBqmdCYXctfem48+NxAm4IdZgIfz0EsBrJTSU4QkjpMAM5Hl+FQ37bIGj0TTjeW4Pg25tjQFDxkLklaFON2XzicBk4/jsDzcfm3PYh48l2/Hhqnv0MuSxjm3bRsKAWr+HQw5BQsa011rtoPtN1X3aLBCpKQZHnHS1NACz3g6BJ84zBi+VvWbzizi7NX3vmnhnr57XxtFAnQgINIDStL+/375IIMH6I3OXBmQjKVeLBR+1aosreq+90GDFlxCpP7SHC6M1nCBiD/eYuR6k611R7wVwoblbG2i75N1btr6HV4jZ25iI1mt5OW3lVFlsHpXHTfHxrOCWtMWl0pX6c5zlf7HWu9LY/Sm3L+qjy4V9bXSzte0i6Kar2q56uBPz/eFDVwyxuiJgSgClmnai0iknXBOM5Ec/NmXzZ3S5FdLTyBvHHKOMWZhCDhRLgW1JGz/BiYMUTuTC7NBAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image3\"\n        title=\"image3\"\n        src=\"/static/404ec8bf0e538a2033a5e1ac11deb292/f058b/image3.png\"\n        srcset=\"/static/404ec8bf0e538a2033a5e1ac11deb292/c26ae/image3.png 158w,\n/static/404ec8bf0e538a2033a5e1ac11deb292/6bdcf/image3.png 315w,\n/static/404ec8bf0e538a2033a5e1ac11deb292/f058b/image3.png 630w,\n/static/404ec8bf0e538a2033a5e1ac11deb292/40601/image3.png 945w,\n/static/404ec8bf0e538a2033a5e1ac11deb292/78612/image3.png 1260w,\n/static/404ec8bf0e538a2033a5e1ac11deb292/2dc7d/image3.png 1760w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h1>Rebase를 언제 사용해야 할까?</h1>\n<p><strong>Git Rebase 는 다른사람과 같이 사용하는 master, develop 같은 브랜치에서는 절대로 사용하면 안됩니다.</strong></p>\n<p>다른 팀원과 공유하는 브랜치를 rebase 할 경우, 해당 브랜치는 내 로컬에서만 전혀 다른 history 를 갖게 될 수도 있습니다.</p>\n<p>이를 다시 다른 팀원들의 동일 브랜치와 합치려면 git merge 를 통해 새로운 merge commit 을 생성하는 것이 불가피하고 그뿐만 아니라 history 상에 동일한 code 변경 내용을 가진 history 가 중복으로 존재하게 될 수도 있습니다.</p>\n<p>이를 해결하기 위해서는 <code class=\"language-text\">Git Revert</code>를 활용하는 것을 고려해야 합니다.</p>\n<h1>결론</h1>\n<ul>\n<li>만약 master 브랜치가 매우 빠르게 업데이트되고 있고 그에따라 feature 브랜치와 계속해서 merge 해야한다면 rebase 방식을 고려해 보는 것이 좋을 것 같습니다.</li>\n<li><code class=\"language-text\">git log, git bisect 또는 gitk</code> 등의 명령어를 사용한 커밋 로그를 보는 것이 쉬워집니다.</li>\n</ul>","frontmatter":{"title":"Git Rebase, Git Merge 차이","date":"December 31, 2020","description":"평소에 Git Merge 방식으로만 개발했었는데 이번에 Git Rebase 방식도 알아야겠다는 생각이 들어서 포스팅하게 되었습니다."}},"previous":{"fields":{"slug":"/git-flow/"},"frontmatter":{"title":"깃 플로우 톺아보기"}},"next":null},"pageContext":{"id":"91581f11-91a7-5958-86a2-30ac0052ff78","previousPostId":"88dde8a8-f05a-5e0b-8753-849b3fe25c8a","nextPostId":null}},"staticQueryHashes":["2841359383","916993862"]}